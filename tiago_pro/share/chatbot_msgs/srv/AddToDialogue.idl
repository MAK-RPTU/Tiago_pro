// generated from rosidl_adapter/resource/srv.idl.em
// with input from chatbot_msgs/srv/AddToDialogue.srv
// generated code does not contain a copyright notice

#include "hri_actions_msgs/msg/Intent.idl"

module chatbot_msgs {
  module srv {
    module AddToDialogue_Request_Constants {
      const string SYSTEM_USER_ID = "system";
    };
    @verbatim (language="comment", text=
      "Adds an entry to the dialogue history, potentially triggering a response from the chatbot.")
    struct AddToDialogue_Request {
      @verbatim (language="comment", text=
        "The id of the action Dialogue to be advanced.")
      int32 dialogue_id;

      @verbatim (language="comment", text=
        "(Optional) The detected locale for the 'input' field, using following format:" "\n"
        "the [ISO 639-1 language code](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes), lower-case" "\n"
        "followed by an underscore," "\n"
        "followed by the [ISO 3166-1 alpha-2 region code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2), upper-case." "\n"
        "For example, 'en_GB' specifies British English." "\n"
        "If not provided, the system should use the dialogue default locale.")
      string locale;

      @verbatim (language="comment", text=
        "The ID of the user which generated the text." "\n"
        "The use of the ID depends on the chatbot implementation." "\n"
        "For example, in order of complexity, the ID could be:" "\n"
        "- ignored" "\n"
        "- used to distinguish between different users" "\n"
        "- used to distinguish between different users, replacing the ID with the user's name by accessing a database" "\n"
        "" "\n"
        "If the text is generated by the system, the value should be set to SYSTEM_USER_ID's value." "\n"
        "This is generally the case when the system either requires to initiate a conversation or verbalize a system state.")
      string user_id;

      @verbatim (language="comment", text=
        "The text for which a response is requested." "\n"
        "" "\n"
        "If the user_id is not SYSTEM_USER_ID's value, the value is the user's input in plain text." "\n"
        "E.g., \"Hi, what is your name?\"" "\n"
        "" "\n"
        "Otherwise, if the user_id is SYSTEM_USER_ID's value, the text is the system-generated data input." "\n"
        "The data format depends on the chatbot implementation and the specific model used." "\n"
        "" "\n"
        "For instance, an LLM-based chatbot might use both plain text and/or structured data." "\n"
        "Either one of the following could be valid:" "\n"
        "- \"A person with user_id 1234 is approaching you, greet him politely.\"" "\n"
        "- \"{\"action\": \"greet\", \"target\": \"1234\", \"modifiers\":}\" (no predefined fields JSON format)" "\n"
        "- \"{\"intent\": \"__intent_greet__\", \"data\": {\"agent\": \"system\", \"recipient\": \"1234\", \"manner\": \"polite\"}, \"source\": \"__myself__\", \"modality\": \"__modality_speech__\"}\" (hri_actions_msgs/Intent JSON format)" "\n"
        "" "\n"
        "On the other hand, a classic chatbot might instead use only structured data," "\n"
        "where the fields should match the internal variables used by the specific chatbot model.")
      @unit (value="\"polite\"")
      string input;

      @verbatim (language="comment", text=
        "Whether it is required a response from the chatbot.")
      boolean respond;
    };
    @verbatim (language="comment", text=
      "The text of the response to the request." "\n"
      "It might be left empty if no suitable response can be generated in the given context." "\n"
      "E.g., if an intent was detected, the response might depend on how the intent is handled by the system." "\n"
      "In this case, a verbalized response might be solicited with a second request, using the intent processing result as system input.")
    struct AddToDialogue_Response {
      string response;

      @verbatim (language="comment", text=
        "The list of intents that were detected in the request or generated in response." "\n"
        "The intents are in order of relevance, with the most relevant one first." "\n"
        "It might be left empty if no intent is detected.")
      sequence<hri_actions_msgs::msg::Intent> intents;

      @verbatim (language="comment", text=
        "The error message." "\n"
        "This is not empty only if the request could not be fully processed.")
      string error_msg;
    };
  };
};
